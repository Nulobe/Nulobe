<div class="app-results">
  <div class="spinner-container">
    <div class="spinner" [class.fade-out]="!(loading$ | async)">
      <app-spinner></app-spinner>
    </div>
  </div>
  <div class="content" [class.fade-in]="!(loading$ | async)">
    <div class="container" *ngIf="!(loading$ | async)">
      <div class="title">
        <div class="tags">
          <div class="tags-view-mode" *ngIf="!isEditingTags">
            <app-tag-list
              [tags]="tags"
              (onTagClick)="navigateToTag($event)"></app-tag-list>
            <md-icon class="edit-icon" (click)="isEditingTags = true">mode_edit</md-icon>            
          </div>
          <div class="tags-edit-mode" [ngClass]="{ 'has-tag': tags.length > 0 }" *ngIf="isEditingTags">
            <app-tag-selector
              [tags]="tags"
              (onTagsUpdated)="tags = $event"
              (onSubmit)="search()"></app-tag-selector>
          </div>
        </div>
        <h1>
          <span>Found {{ (facts$ | async).length }}</span>
          <span *ngIf="(facts$ | async).length === 1">nueron</span>
          <span *ngIf="(facts$ | async).length !== 1">nuerons</span>
        </h1>
      </div>
      <div class="fact-list-container">
        <app-fact-list
          [facts]="facts$ | async"
          [permissionsResolver]="permissionsResolver"
          (onTagSelect)="navigateToTag($event)"
          (onVote)="voteFact($event)"
          (onFlag)="flagFact($event)"
          (onEdit)="editFact($event)"></app-fact-list>
      </div>
      <div class="fact-list-end-container">
          <div class="fact-list-end">
            <div class="fact-list-end-rule"></div>
          </div>
      </div>
    </div>
  </div>
</div>
