<div class="app-results">
  <div class="spinner-container">
    <div class="spinner" [class.fade-out]="!(loading$ | async)">
      <core-spinner></core-spinner>
    </div>
  </div>
  <div class="content" [class.fade-in]="!(loading$ | async)">
    <div class="container" *ngIf="!(loading$ | async)">
      <div class="title">
        <div class="tags">
          <div class="tags-view-mode" *ngIf="!isEditingTags">
            <core-tag-list
              [tags]="tags"
              (onTagClick)="navigateToTag($event)"></core-tag-list>
            <md-icon class="edit-icon" (click)="beginEditTags()">mode_edit</md-icon>            
          </div>
          <div class="tags-edit-mode" [ngClass]="{ 'has-tag': isEditingTags && editingTags.length > 0 }" *ngIf="isEditingTags">
            <core-tag-selector
              #tagSelector
              [tags]="editingTags"
              (onTagsUpdated)="editingTags = $event"
              (onSubmit)="completeEditTags()"></core-tag-selector>
          </div>
        </div>
        <h1>
          <span>Found {{ (facts$ | async).length }}</span>
          <span *ngIf="(facts$ | async).length === 1">nueron</span>
          <span *ngIf="(facts$ | async).length !== 1">nuerons</span>
        </h1>
      </div>
      <div class="fact-list-container">
        <core-fact-list
          [facts]="facts$ | async"
          [permissionsResolver]="permissionsResolver"
          (onTagSelect)="navigateToTag($event)"
          (onVote)="voteFact($event)"
          (onFlag)="flagFact($event)"
          (onEdit)="editFact($event)"></core-fact-list>
      </div>
      <div class="export-button-container" *ngIf="(facts$ | async).length">
        <button md-button (click)="openExportDialog()">Export</button>
      </div>
      <!--<div class="fact-list-end-container">
          <div class="fact-list-end">
            <div class="fact-list-end-rule"></div>
          </div>
      </div>-->
    </div>
  </div>
</div>
